<HTML>
   <HEAD>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
      <TITLE>Current Status of XSV: Coverage, Known Bugs, etc.Applies to XSV 2.0-3 of 2002/11/08 15:08:04</TITLE><STYLE type="text/css">
       PRE.code {font-family: monospace}
       PRE {MARGIN-LEFT: 0em}
       OL OL {list-style-type: lower-alpha}
    </STYLE></HEAD>
   <BODY STYLE="font-family: times">
      
      <DIV STYLE="text-align: center">
           
         <H1>Current Status of XSV: Coverage, Known Bugs, etc.</H1>
           
         <H1>Applies to XSV 2.0-3 of 2002/11/08 15:08:04</H1>
           
         <DIV><A href="http://www.ltg.ed.ac.uk/~ht/">Henry S. Thompson</A></DIV>
           
         <DIV><A href="http://www.ltg.ed.ac.uk/~richard/">Richard Tobin</A></DIV>
           
         <DIV>8 November 2002</DIV>
          
      </DIV>
       
        
         
      <H2>1. 
         &nbsp;
         What is XSV
      </H2>
         
      <P>XSV (XML Schema Validator) is an open source (GPLed) work-in-progress attempt at a conformant
         schema-aware processor, as defined by <A href="http://www.w3.org/TR/xmlschema-1/">XML Schema Part 1: Structures</A>, May 2, 2001 (REC) version.  It has been developed at the <A href="http://www.ltg.ed.ac.uk">Language Technology Group</A> of the <A href="http://www.hcrc.ed.ac.uk">Human Communication Research Centre</A> in the <A href="http://www.inf.ed.ac.uk">Division of Informatics</A> at the <A href="http://www.ed.ac.uk">University of Edinburgh</A>, with support for one of us (Thompson) from the <A href="http://www.w3.org/">World Wide Web Consortium</A>.
      </P>
        
        
         
      <H2>2. 
         &nbsp;
         How can I use XSV
      </H2>
         
          
      <H4>2.1. 
         &nbsp;
         Using XSV online
      </H4>
         
      <P>The simplest way to use XSV is via a <A href="http://www.w3.org/2001/03/webdata/xsv">form-based interface</A> on the web. <SPAN style="color: red">Nota bene</SPAN>, the current version is experimental, it involves a major restructuring of the code, and a number of fixes/increases in coverage,
         including some new
         command-line facilities, particularly the ability to force
         the top-level element to have a particular name and/or type.  I intend to make this the main branch going forward -- please
         let me know of anything that breaks that used to work.
      </P>
         
        
         
      <H4>2.2. 
         &nbsp;
         Running XSV at your own installation
      </H4>
         
          
      <H4>2.2.1. 
         &nbsp;
         Win32 one-click installation
      </H4>
          
      <P>I've packaged the current version up in to a
         <A href="ftp://ftp.cogsci.ed.ac.uk/pub/XSV/XSV20.EXE">self-installing
            package</A> for Win32 platforms:  just fetch it, run it, and add the
         installation directory to your PATH, then
      </P>
         
      <BLOCKQUOTE>
         <DIV><PRE class="code">&gt; xsv [flags] target [schemas . ..]</PRE></DIV>
      </BLOCKQUOTE>
          
      <DL>
              
         <DT><B>-E elt</B></DT>
         <DD>Force document element to be named <CODE>elt</CODE>,
            an expanded name (i.e. either an unqualfied simple name in no known namespace,
            or a name of the form <CODE>{namespaceName}localName</CODE>).
         </DD>
              
         <DT><B>-T type</B></DT>
         <DD>Force document element to be validated against the
            type definition named <CODE>type</CODE>, and expanded name as for -E.
         </DD>
              
         <DT><B>-o errfile</B></DT>
         <DD>Output error file to <CODE>errfile</CODE> rather
            than <CODE>stderr</CODE></DD>
              
         <DT><B>-s stylefile</B></DT>
         <DD>Include an XSL style PI to
            <CODE>stylefile</CODE> in the error output
         </DD>
              
         <DT><B>-r [alt|ind]</B></DT>
         <DD>Reflect the PSVI as an XML file to <CODE>stdout</CODE>
            (follow with <CODE>alt</CODE> to force old-style (alternating normal form)
            reflection, or <CODE>ind</CODE> (the default) for new-style (individual normal
            form) reflection
         </DD>
              
         <DT><B>-w</B></DT>
         <DD>Include warnings in error output</DD>
              
         <DT><B>-t</B></DT>
         <DD>Show stage timings</DD>
              
         <DT><B>-k</B></DT>
         <DD>Attempt instance validation even if schema(s) has/have errors</DD>
              
         <DT><B>-i</B></DT>
         <DD>Input should all be schemas, assume they are meant to be
            complete and check them as such
         </DD>
              
         <DT><B>-D</B></DT>
         <DD>Use DTD to pre-validate, not built-in schema-for-schemas</DD>
              
         <DT><B>-l</B></DT>
         <DD>Scan the whole document for schema location hints, not
            just root and new-namespace-binding-introducers
         </DD>
             
      </DL>
         
      
       
      <H4>2.2.2. 
         &nbsp;
         Source distributions for the more adventurous
      </H4>
         
      <P>You can download the (Python) sources from <A href="http://dev.w3.org/cvsweb/xmlschema/XSV">the W3C public CVS repository</A>, install <A href="http://www.python.org/2.2/">Python 2.2</A>, install <A href="http://www.ltg.ed.ac.uk/software/xml/">PyLTXML</A> (be sure to use the most recent, currently PyLTXML-1.3, release 2, RPMs for a number of architectures now available) to get
         the necessary XML validating library and do:
      </P>
         
      <BLOCKQUOTE>
         <DIV><PRE class="code">&gt; [set PYTHONPATH to whereever you installed XSV sources]
&gt; python .../XSV/commandLine.py ...</PRE></DIV>
      </BLOCKQUOTE>
      
      
      <P>No, the above instructions aren't sufficiently detailed, but you probably
         don't want the sources unless you can figure out how to make it work :-)
      </P>
         
          
      <H4>2.2.3. 
         &nbsp;
         Linux RPMs
      </H4>
          
      <P>RPMs are now available for those running Linux: <A href="ftp://ftp.cogsci.ed.ac.uk/pub/XSV/XSV-2.0-3.noarch.rpm">installable</A> and <A href="ftp://ftp.cogsci.ed.ac.uk/pub/XSV/XSV-2.0-3.src.rpm">source</A>.  These have a dependency on PyLTXML-1.3 (and Python itself), see above.
      </P>
         
         
          
      <H4>2.2.4. 
         &nbsp;
         Source tarball
      </H4>
          
      <P>A simple <A href="ftp://ftp.cogsci.ed.ac.uk/pub/XSV/XSV-2.0.tar.gz">tar
            ball</A> is also available, suitable for installation using Python's distutils:
      </P>
          
      <BLOCKQUOTE>
         <DIV><PRE class="code">&gt; [cd to whereever you unpacked the tarball]
&gt; python setup.py install</PRE></DIV>
      </BLOCKQUOTE>
         
        
        
        
         
      <H2>3. 
         &nbsp;
         What is implemented
      </H2>
         
      <P>The basic framework of schema checking and instance schema-validation is
         implemented.  Many details of both are not yet filled in.  Here's a brief
         tabulation (to be extended):
      </P>
         
          
      <H4>3.1. 
         &nbsp;
         Implemented at least in part
      </H4>
          
      <P>
              Content-model validation
              <BR>Attribute validation
              <BR>Include
              <BR>Import
              <BR>Equivalence classes
              <BR>Local and global element and attribute declarations
              <BR>Type definition derivation by extension and restriction (constraints
         on valid
         restrictions not completely enforced, but mostly)
              <BR>Identity-constraint checking (key/unique/keyref) (but see below)
              <BR>Content and attribute wildcards
              <BR>xsi:schemaLocation, xsi:noNamespaceSchemaLocation and, as last
         resort, dereferencing of namespace URIs to find schema documents
              <BR>xsi:null
              <BR>xsi:type
              <BR>Opportunistic validation inside &lt;any&gt; and &lt;anyAttribute&gt;
              <BR>Redefinition
              <BR>whitespace processing
              <BR>Partial support for simple types, including enumeration, pattern
         (partially), length of lists, min/max, unions
             
      </P>
         
         
          
      <H4>3.2. 
         &nbsp;
         Not implemented yet
      </H4>
          
      <P>
              The rest of simple type conformance, particularly dates etc.
              <BR>All groups are neither properly constrained as to how they appear in
         schemas, nor are they completely enforced wrt instances:  they are implemented
         as a starred choice.
              <BR>ID/IDREF
              <BR>Occurrence ranges over 100 for elements or groups in content models
         (performance limitation)
              <BR>Use of values for identity constraint checking
             
      </P>
         
         
          
      <H4>3.3. 
         &nbsp;
         Recent Changes
      </H4>
          
      <P>
              Changed version numbering
              <BR>Implemented group redefinition
              <BR>Fix obscure bugs if namespace URIs had chars &gt;127
              <BR>Fail more gracefully in absence of a base type for restriction
              <BR>Change 'rel' command-line arg to 'alt', for alternating normal form,
         which is what it always was
              <BR>Major source-code restructuring
              <BR>Checking of NMTOKEN, Name and NCName built-in types
              <BR>Partial support for pattern facet (basically everything
         <I>except</I> named classes other than \d \s \w \D \S \W)
              <BR>Support -i with -r (just the schema components get reflected)
              <BR>Add top-level force element and/or type params
              <BR>Change reflection format
              <BR>Support enumeration and length facets on lists, and enumeration on unions
              <BR>Fix bug which prevented explicit derivation by extension from anySimpleType
              <BR>Fix pair of bugs wrt attribute wildcards and urtype
              <BR>Handle redefining type defs with simple content
              <BR>Improve management of file redundancy
              <BR>Allow for xml:base by updating builtin schema for schemas
              <BR>Fix bug in handling recursive keys
              <BR>Fix some inadvertent bugs introduced by speedup
              <BR>Performance improvements -- approx. 25% speedup
              <BR>Flag attempt to define a complex type by restricting a simple type
              <BR>Fix corner case bug when schema doc has schemaLoc
              <BR>Fix longstanding bug with multiple local element decls
              <BR>Enforce that types of elements in content model derived by
         restriction must be restrictions of their corresponding base types
              <BR>Introduce FSM-based checking of derivation by restriction -- <SPAN style="color: red">big change, potential backwards incompatibilities!</SPAN>
              <BR>Fix bug introduced by include checking
              <BR>Enforce include restrictions more carefully, enforce &lt;import&gt;
         required for QName reference.
              <BR>Check for schemaLoc on root of schema docs before validating them
              <BR>Fixed some base URL bugs breaking e.g. relative schemaLoc URLs, and
         then a bug in one of the fixes
              <BR>Fix re-introduced multiple include bug
              <BR>Switched from using DTD to pre-validate schema documents to using
         schema-for-schemas -- <SPAN style="color: red">big change, potential backwards incompatibilities!</SPAN>
              <BR>Fix crash when whiteSpace specified explicitly
              <BR>Improved reflection of model group definitions, identity constraint definitions
              <BR>Fix intersection of ##local and ##other bug
              <BR>Fix two bugs wrt max/min constraints
              <BR>Fixed problem with multiple chameleon includes
              <BR>Fixed long-standing failure to propagate keys and uniques upwards
              <BR>Fixed long-standing failure to correctly implement reference to
         key/unique from keyref using QNames
              <BR>Changed schema location policy -- now will only look for schemaLoc
         attrs on doc elt and on change to previously unseen namespace.  Such namespaces
         will also be dereferenced in the absence of a schemaLoc (this is new).
              <BR>Made all schema document access messages consistent
              <BR>Fixed bug which hid error message when non-schema-doct presented as
         schema; fixed crash when list of union failed
              <BR>Fixed bug in type definition derivation chain checking; added better
         support for attribute defaults.
              <BR>Fixed some crashes with -i and an obscure chameleon include bug
              <BR>Reflected infoset in line with
                     <A href="http://www.w3.org/2001/05/serialized-infoset-schema.html">published schemas</A>
              <BR>Support RDDL at e.g. namespace URIs
              <BR>bug fixes wrt min/max, element fixed/default
              <BR>Reflect annotations, oob attributes properly
              <BR>Handle extending with empty content model correctly
              <BR>Reflect more thoroughly
              <BR>Complete standalone schema checking, i.e. assuming this is all
         you're going to get
              <BR>Multiple keys is error, not warning
              <BR>Handle bogus xsi attrs
              <BR>Better crash logging
              <BR>Obscure bug in defaulted NS attributes fixed
              <BR>Added full independent schema check switch (-i)
              <BR>Fixed bug in use of DTD to pre-validate schemas, this
         caused serious and baffling problems, sorry.
              <BR>Supports 'decimal', not 'number' 
              <BR>Supports all renamings,
         <CODE>http://www.w3.org/2001/XMLSchema</CODE> namespace
              <BR>Improve stylesheet wrt XML parsing error output
              <BR>XPath implementation now implements NS prefixes properly
              <BR>Improve efficiency for large schemas
              <BR>support for whitespace processing added
              <BR>PSVI now mostly supported, can be reflected with -r switch
              <BR>Fixed missing DTD complaint
              <BR>Vintage 2000-09-22 changes restricting what can be specified in conjunction with
         element declarations of the form <CODE>&lt;element ref="..."&gt;</CODE> now implemented
              <BR><SPAN style="color: red">Important:</SPAN> <I>All</I> schemas are now
         validated against the DTD for schemas before being loaded, even if they lack a
         <CODE>DOCTYPE</CODE> of their own.  This may mean errors are found where none
         were before, or a change in error message.  Feedback on this change is welcome.
              <BR>Handle shadowing of e.g. elementFormDefault in &lt;include&gt;d schemas correctly
              <BR>(Partial) support for restricting a simpleContent complexType with a
         nested simpleType
              <BR>Check 'fixed' attribute values for correctness
              <BR>Provide control of whether instance validation warnings appear
         (default is that they <I>don't</I>)
              <BR>Improve bomb-proofing and recovery after crashes
              <BR>Backlog of bug fixes, including forestalling crashes when
         &lt;restriction&gt;/&lt;extension&gt; are missing
              <BR>Allow references to 'anyType' to work (oops)
              <BR>Display more (more useful) output even if validator crashes
              <BR>add -o outfile for command line invocation on e.g. win98 where
         capturing stderr is hard
              <BR>Fix xmlschema-instance namespace, so xsi:schemaLocation works (oops)
              <BR>losing itemType no longer causes crash
              <BR>fix bug in restriction of lists
              <BR>new version syntax, support for redefine of simple and complex type defns
              <BR>Chameleon include: including a schema doc't with no target namespace
         into one <I>with</I> a target namespace does the right thing
              <BR>No files on command line causes read from stdin
              <BR>Bug fixes: handle nested attribute group references, more than two
         explicitly supplied schemas
              <BR>Bug fixes: handle lists as element content correctly; allow simple
         types as type for document element; don't crash on restriction of type with
         simple content; don't crash on min/max for date/time types
              <BR>Bug fixes: don't crash on missing group defn or attr. type or bogus XPath
              <BR>Bug fixes: allow (but still don't implement) minInclusive on string
         types, don't crash if XPath ends with a '/'
              <BR>Bug fixes: catch bad 'content' attr, don't crash after empty
         <CODE>&lt;group&gt;</CODE>, missing base
              <BR>Better handling of some content-model errors in schemas
              <BR>Allow appropriate facets on types derived by 'list' (still not
         actually <I>enforced</I> :-()
              <BR>Bug fixes: require 'value' on facets; don't crash if simple type has
         element content; handle min/max facets on float/double
              <BR>More bug fixes: catch complex type used for attributes or base of
         simple type cleanly; don't die if xsi:type encountered during lax validation
              <BR>Don't require 'fixed' attributes to appear, fix obscure bug in use
         of xsi:type and no-target-namespace schemas
              <BR>Allow &lt;unique&gt; fields to be missing without comment
              <BR>More thorough enforcement of Unique Attribution (== determinism)
         constraint on content models, including checking for <CODE>&lt;any&gt;</CODE>-derived ambiguities
              <BR>Bug-fixes to catch logged crashes: missing basetypes, bogus attr
         type derivation, minInclusive
              <BR>Upgraded stylesheets to report schema errors and warnings properly
              <BR>Fixed bugs in cases of missing attribute group definition, missing
         attribute type definition, missing base type definition
              <BR>16-bit, XML output version now the default
              <BR>now checks enumerated types, user-defined
         min-max bug fixed
              <BR>Partial check of QName simple type conformance
              <BR>Fix bad knock-on effect of failed import
              <BR>Improve fidelity of lax validation; validate laxly instead of
         throwing error if no declaration found for document element
              <BR>Fix bug in opportunistic validation of attribute values
              <BR>Support for xsi:null
              <BR>Fix bug causing bogus errors when restricting elements declared to
         have the urtype definition
              <BR>Fix bug which made the &lt;anyAttribute namespace="other"&gt; in the
         schema for schemas overly generous
              <BR>Try to catch all 404 (not found) errors better
              <BR>Fixed ref-to-undeclared-elt bug
              <BR>Fixed a bug causing a crash if you used an element with no
         content model at all == the ur-type by default, manifesting itself as
         an 'Attribute Error, note' crash
              <BR>Now checks for and handles gracefully case where supplied file is
         not a schema document
             
      </P>
         
         
          
      <H4>3.4. 
         &nbsp;
         Known bugs/features
      </H4>
          
      <P>
              Lists don't allow min/maxLength, but they should
             
      </P>
         
        
       
      
   </BODY>
</HTML>